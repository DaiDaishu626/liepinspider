$(function(){function close_layer(){float_layer_timer&&clearTimeout(float_layer_timer),$float_layer.fadeOut("slow",function(){$float_layer.remove()})}function show_layer(){is_show_layer=!LT.Cookie.get("_float_layer"+LT.User.user_id),is_show_layer&&($float_layer.fadeIn("slow",function(){float_layer_timer=setTimeout(close_layer,1e4)}),window.tlog=window.tlog||[],window.tlog.push("s:S000000042"),LT.Cookie.set("_float_layer"+LT.User.user_id,1,!1)),0===$placeholder.length&&($float_layer.after('<div data-selector="float_layer_placeholder" style="height:1px">'),$placeholder=$('[data-selector="float_layer_placeholder"]'))}var $kedyword,timer,tlogKeyWords,_survey,$float_layer,float_layer_timer,is_show_layer,$placeholder,$dom,$body=$("#sojob"),$advanced=$('[data-selector="sojob-search-advanced"]',$body),$clearSearch=$('[data-selector="clear-search"]',$advanced);LT.File.Js.load("//concat.lietou-static.com/core/pc/revs/js/common/plugins/jquery.placeholderui_b65ce690.js",function(){$('[data-selector="keyword"]').PlaceholderUI()}),1===parseInt(LT.Cookie.get("sojobAdvancedTips"))&&LT.Cookie.del("sojobAdvancedTips","/"),LT.File.Js.load("//concat.lietou-static.com/core/pc/revs/js/common/plugins/jquery.selectui_8d361592.js,//concat.lietou-static.com/core/pc/revs/js/common/plugins/jquery.localdata_67831959.js",function(){var $form=$advanced.find("form"),$city=$("input[data-selector='city']",$form),$industry=$("input[data-selector='industry']",$form);$industry.LocalDataIndustries({type:"checkbox",max:3,all:!0}),$city.LocalDataCity({type:"checkbox",max:3,all:!0}),$('[data-selector="compkind"]',$form).LocalDataSelect({name:"compkind",all:!0}),$('[data-selector="compscale"]',$form).LocalDataSelect({name:"compscale",all:!0}),$('[data-selector="job"]').LocalDataJobs({type:"checkbox",max:5,callback:function(){window.tlog=window.tlog||[],window.tlog.push("c:w-sojob-job")},all$:!0}).closest(".filed").bind("click",function(){window.tlog=window.tlog||[],window.tlog.push("s:w-sojob-job")}),$(".selectui",$form).SelectUI(),$clearSearch.bind("click",function(){$advanced.find("input").not('[name="searchField"],[name="searchType"],[name="init"],[name="gray"]').val(""),$('[data-selector="clean-condition"]',$body).val("true"),$city.LocalDataCity("refresh",1),$('[data-selector="industry"]',$form).LocalDataIndustries("refresh"),$('[data-selector="job"]').LocalDataJobs("refresh"),$('[data-selector="compkind"] .selectui-result',$form).html("不限"),$('[data-selector="compscale"] .selectui-result',$form).html("不限"),$('[data-selector="jobKind"] .selectui-result',$form).html("不限")}),setTimeout(function(){var storeKeys,text,$history=$('[data-selector="search-history"]',$body),industry=$industry.length&&$industry.LocalDataIndustries("text")||"",$jobs=$advanced.find('[data-selector="job"]'),jobs=$jobs.val()||"",city=$city.val()||"",key=$advanced.find('[data-selector="keyword"]').val()||"",$compscale=$('[name="compscale"]',$advanced),compscale=$compscale.val(),$jobKind=$('[name="jobKind"]',$advanced),jobKind=$jobKind.val(),$compkind=$('[name="compkind"]',$advanced),compkind=$compkind.val();return industry||jobs||city||key||compscale||jobKind||compkind?(compscale="000"!==compscale&&compscale?$('[data-selector="compscale"] .selectui-result').text():"",jobKind="000"!==jobKind&&jobKind?$('[data-selector="jobKind"] .selectui-result').text():"",compkind="000"!==compkind&&compkind?$('[data-selector="compkind"] .selectui-result').text():"",storeKeys={id:+new Date,industry:industry,jobs:$jobs.length&&$jobs.LocalDataJobs("text")||"",city:$city.length&&$city.LocalDataCity("text")||"",keywords:key,compscale:compscale,jobKind:jobKind,compkind:compkind},text=[],storeKeys.city&&("不限"===storeKeys.city?text.push("全部地区"):text.push(storeKeys.city)),storeKeys.keywords&&text.push(storeKeys.keywords),storeKeys.industry&&text.push(storeKeys.industry),storeKeys.jobs&&text.push(storeKeys.jobs),storeKeys.compscale&&text.push(storeKeys.compscale),storeKeys.jobKind&&text.push(storeKeys.jobKind),storeKeys.compkind&&text.push(storeKeys.compkind),text=text.join("&nbsp;＋&nbsp;"),void(text&&$history.css("height","auto").find("span").attr("data-id",storeKeys.id).html(text))):void $history.css("height","0")},500)}),$kedyword=$('[data-selector="keyword"]',$body),timer=null,$kedyword.bind("keyup",function(e){var code,$activeLi,$this=$(this),$suggest=$this.parent().find(".sojob-suggest"),$li=$suggest.find("li");if(/^13|37|38|39|40$/.test(e.keyCode)&&$li.length){if(code=e.keyCode,$activeLi=$li.filter(".hover"),40===code){if(!$activeLi.length)return void $this.val($li.eq(0).addClass("hover").text());$this.val($activeLi.removeClass("hover").next().addClass("hover").text())}else if(13===code){if($activeLi.length)return $activeLi.trigger("click"),$suggest.empty().hide(),!1}else if(38===code){if(!$activeLi.length)return void $this.val($li.eq($li.length-1).addClass("hover").text());$this.val($activeLi.removeClass("hover").prev().addClass("hover").text())}}else LT.ajax({url:LT.Env.wwwRoot+"zhaopin/searchinfo4suggest.json",type:"GET",data:{key:$this.val()},cache:!1,dataType:"json",success:function(data){var _data,html,i,len;if(data&&1===data.flag){if(_data=data.data||{},html="",_data.length){for(html="<ul>",i=0,len=_data.length;len>i;i++)html+='<li><a href="javascript:;">'+_data[i]+"</a></li>";html+="</ul>"}else $suggest.hide();html&&$suggest.html(html).show()}}})}).bind("blur",function(){var $this=$(this);timer=setTimeout(function(){$this.parent().find("ul").empty().hide()},500)}),tlogKeyWords=$('[data-selector="job"]').length?"_9":"_1",$kedyword.parent().find(".sojob-suggest").delegate("li","click",function(){var $this=$(this),$suggest=$this.closest(".sojob-suggest");$suggest.parent().find('[data-selector="keyword"]').val($(this).text()),timer=setTimeout(function(){$suggest.empty().hide()},500),window.tlog=window.tlog||[],window.tlog.push("c:w_sojob_keyword"+tlogKeyWords)}).delegate("li","mouseenter",function(){clearInterval(timer)}),$(function(){function highLight(html,keyReg){var htmlArr=[],keyArr=[],htmlReg=/<\/?[^>]+>/g;return html=html.replace(htmlReg,function(all){return htmlArr.push(all),"<$zhinengyongzhege$>"}),html=html.replace(keyReg,function(all){return keyArr.push(all),"<$hilight$>"}),html=html.replace(/<\$hilight\$>/g,function(){return keyArr.shift()||""}),html=html.replace(/<\$zhinengyongzhege\$>/g,function(){return htmlArr.shift()||""})}var $diyArea,$areaStart,$areaEnd,$diytns,$btnSubmit,$searchResult,fileterHeight,key,highKind,lightReg,$li,$item,$sojobFilter=$('[data-selector="sojob-filter"]',$body),$filterSelect=$('[data-selector="filter-select"]',$sojobFilter);$filterSelect.hover(function(){$(this).children("ul").show()},function(){$(this).children("ul").hide()}).find("a").not(".btn-submit").bind("click",function(){var field=$(this).closest('[data-selector="filter-select"]').attr("data-field"),rel=$(this).attr("rel");return"8"===rel&&(window.tlog=window.tlog||[],window.tlog.push("c:C000000545")),$advanced.find('input[name="'+field+'"]').val(rel).closest("form").trigger("submit"),!1}),$clearSearch.bind("click",function(){$filterSelect.each(function(index,el){var that=$(this),$li=that.find("li"),$firstLi=$li.eq(0),text=$firstLi.text();$li.removeClass("checked"),$firstLi.addClass("checked"),that.find(".hd .v").html(text)})}),$diyArea=$(".diy-area",$filterSelect),$areaStart=$('[data-selector="area-start"]',$diyArea),$areaEnd=$('[data-selector="area-end"]',$diyArea),$diytns=$(".diy-btns",$diyArea),$btnSubmit=$(".btn-submit",$diyArea),$areaStart.add($areaEnd).bind("keyup paste",function(){$diytns.show()}),$btnSubmit.bind("click",function(){var startVal=($areaStart.val()||"").replace(/[^\d].*/g,""),endVal=($areaEnd.val()||"").replace(/[^\d].*/g,"");return!startVal&&!endVal||startVal&&endVal&&Number(startVal)>Number(endVal)?!1:($('input[name="salary"]',$body).val(startVal+"$"+endVal),$advanced.find("form").trigger("submit"),!1)}),LT.Browser.IE6||($searchResult=$sojobFilter.parent(),fileterHeight=$sojobFilter.height(),$(window).bind("scroll resize",function(){var offsetTop=$searchResult.offset().top,scrlooTop=$(this).scrollTop();scrlooTop>offsetTop+fileterHeight?$sojobFilter.css("position","fixed"):$sojobFilter.css("position","absolute")})),key=$kedyword.eq(0).attr("data-synonym-key"),highKind=$('[name="searchField"]').eq(0).val(),key&&(key=key.replace(/^\s+|\s+$/,"").replace(/([\^\$\[\]\(\)\{\}\*\.\+\?\\])/g,"\\$1").split(/\s+/).join("|"),lightReg=new RegExp(key,"ig"),$li=$("ul.sojob-result-list li",$body),$item=$(".sojob-list .sojob-item",$body),$li.each(function(){var $h3=$(this).find("h3"),$company=$(this).find("dt.company");1===parseInt(highKind)?$h3.html(highLight($h3.html(),lightReg)):2===parseInt(highKind)?$company.html(highLight($company.html(),lightReg)):($h3.html(highLight($h3.html(),lightReg)),$company.html(highLight($company.html(),lightReg)))}),$item.each(function(){var $h3=$(this).find(".job-info h3"),$company=$(this).find(".company-info h3");1===parseInt(highKind)?$h3.html(highLight($h3.html(),lightReg)):2===parseInt(highKind)?$company.html(highLight($company.html(),lightReg)):($h3.html(highLight($h3.html(),lightReg)),$company.html(highLight($company.html(),lightReg)))}))}),function(){var __mscid=LT.String.getQuery("mscid"),__refmscid=LT.String.getQuery("mscid",document.referrer||""),mscids1=["t_d_041","t_d_041b","t_d_040","u_c_0006"],mscids2=["t_d_008","t_w_0001","t_w_0002","t_w_0003","t_w_0004","s_00_s00"];return LT.User.isLogin?!1:window.$CONFIG&&window.$CONFIG.isCity?(LT.User.isLogin||"1"!==LT.Cookie.get("slide_guide_home")&&!LT.User.is_lp_user&&LT.File.Js.load("//concat.lietou-static.com/pics/pc/revs/p/beta2/js/page/slide.guider_375c89df.js",function(){window.slideGuider({close:function(){LT.Cookie.set("slide_guide_home","1",!1,"/")}})}),!1):void(-1!==mscids1.indexOf(__mscid)||-1!==mscids1.indexOf(__refmscid)?LT.User.requireLogin({close:!1}):-1!==mscids2.indexOf(__mscid)||-1!==mscids2.indexOf(__refmscid)?LT.User.requireLogin():"1"!==LT.Cookie.get("slide_guide_home")&&!LT.User.is_lp_user&&LT.File.Js.load("//concat.lietou-static.com/pics/pc/revs/p/beta2/js/page/slide.guider_375c89df.js",function(){window.slideGuider({close:function(){LT.Cookie.set("slide_guide_home","1",!1,"/")}})}))}(),_survey=$(".survey"),_survey.length&&LT.User.isLogin&&(!LT.Store.get("_diaoyan"+LT.User.user_id)&&_survey.show(),$("a,em",_survey).on("click",function(){LT.Store.set("_diaoyan"+LT.User.user_id,1),_survey.remove()})),$float_layer=$(".float-layer"),float_layer_timer=null,is_show_layer=LT.User.user_id&&!LT.Cookie.get("_float_layer"+LT.User.user_id),$placeholder=$('[data-selector="float_layer_placeholder"]'),$float_layer.length&&LT.User.isLogin&&is_show_layer&&($dom=$(document),$float_layer.click(function(){window.tlog=window.tlog||[],window.tlog.push("c:C000000515"),close_layer()}),$dom.scroll(function(){var winHeight=$(window).height(),scrollTop=Math.max($("body").scrollTop(),$("html").scrollTop());$placeholder=$placeholder.length>0?$placeholder:$('[data-selector="float_layer_placeholder"]'),$placeholder.length&&(scrollTop+winHeight>=$placeholder.offset().top&&$float_layer.css("position","relative"),scrollTop+winHeight<$placeholder.offset().top&&$float_layer.css("position","fixed")),scrollTop>=winHeight&&$float_layer.is(":hidden")&&show_layer()})),LT.scrollTop&&LT.scrollTop.init(),$('[data-selector="data-url"]',$body).on("click",function(){return!1}),!LT.Cookie.get("subscribe_guide")&&LT.User.isLogin&&1===window.$CONFIG.isHasJobSubscribe&&NodeTpl.get("//concat.lietou-static.com/dev/www/pc/revs/v1/tpls/job/subscribe_guide_13185329.js",{},function(d){$("body").append(d),window.tlog=window.tlog||[],window.tlog.push("s:S000000071")})});